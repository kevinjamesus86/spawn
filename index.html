<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>spawn</title>
</head>
<body>
  <script src="spawn.js"></script>
  <script>

    var work = spawn(function() {

      // because we'll totally need this..
      spawn.import('util.js');

      spawn.on({

        x2: function(num, send) {
          send(num * 2);
        },

        greet: function(name, send) {
          send('Hello, ' + name + '!');
        },

        map: function(arr, send) {
          send(map(arr, function(val, index) {
            return val * index;
          }));
        }

      });

    });

    work.emit('x2', 100, function onDone(result) {
      console.log('x2:', result);
    });

    work.emit('greet', 'Kevin', function onDone(result) {
      console.log('greet:', result);
    });

    work.emit('map', [1,2,3,4], function onDone(result) {
      console.log('map:', result);
    });

  </script>
</body>
</html>